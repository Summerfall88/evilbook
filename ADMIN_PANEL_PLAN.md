# План разработки админ-панели ChristinaEvilbook (/nimda)

Встроенная админка для управления рецензиями, комментариями и пользователями, доступная только для администратора по скрытому адресу `/nimda`.

## Шаг 1: Настройка базы данных и ролей
- Добавить в таблицу `profiles` базы данных Supabase колонку `role` (по умолчанию `user`).
- Назначить аккаунту владельца сайта роль `admin`.
- Обновить тип `Profile` и контекст `useAuth` в приложении, чтобы приложение знало о роли текущего пользователя.

## Шаг 2: Создание защищенного маршрута и макета
- Создать компонент защищенного маршрута (Protected Route), который будет пускать на `/nimda` только пользователей с ролью `admin`, а остальных перенаправлять на главную страницу.
- Сверстать общий макет (Layout) админки с боковым меню навигации (Дашборд, Рецензии, Комментарии, Пользователи).

## Шаг 3: Дашборд (Главная страница админки)
- Создать стартовую страницу администратора.
- Вывести виджеты/карточки с общей статистикой (общее количество рецензий, комментариев, зарегистрированных читателей).

## Шаг 4: Управление рецензиями (Список)
- Создать страницу `/nimda/reviews`.
- Вывести список всех рецензий в виде удобной таблицы (название, автор, дата публикации).
- Добавить базовые функции: поиск, сортировка, кнопка удаления.

## Шаг 5: Управление рецензиями (Создание и Редактирование)
- Создать страницу с формой для добавления новой рецензии и редактирования существующей.
- Добавить поля: название книги, автор, текст рецензии (в идеале многострочное поле или простейший текстовый редактор), оценка, загрузка обложки.
- Настроить логику сохранения данных в базу.

## Шаг 6: Модерация комментариев
- Создать страницу `/nimda/comments`.
- Вывести единый список всех комментариев на сайте (от новых к старым) с указанием автора и рецензии, к которой относится комментарий.
- Добавить возможность быстрого удаления комментария (для модерации спама или нарушений).

## Шаг 7: Управление пользователями
- Создать страницу `/nimda/users`.
- Вывести список всех зарегистрированных пользователей (имя, email, дата регистрации).
- Опционально: добавить функцию блокировки (бана) пользователя.

## Шаг 8: Итоговая безопасность (Политики RLS)
- Пересмотреть и усилить политики Row Level Security (RLS) в Supabase.
- Гарантировать на уровне базы данных, что операции изменения, добавления и удаления данных (рецензий, чужих комментариев) может выполнять только пользователь с ролью `admin`.
